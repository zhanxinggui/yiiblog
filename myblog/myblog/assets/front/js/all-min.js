function NamespacesPrototype(){function b(c,d,e){c[d]=e;e._path=c._path?(c._path+"."+d):d;e._parent=c}function a(d,f,c){var e=f.shift();if(0==f.length){b(d,e,c())}else{if(!d[e]){b(d,e,{})}a(d[e],f,c)}}this.create=function(d,c){a(window,d.split("."),function(){return new c()})};this.register=function(d,c){a(window,d.split("."),function(){return c})}}var Namespaces;if(!Namespaces){Namespaces=new NamespacesPrototype()};Namespaces.create("com.netease.mail.common.JSLoader",function(){var f={};var b={};var e={};var h=this;function a(n){var o=b[n];if(o){var m=[];for(var k=0;k<o.length;k++){var j=o[k];if(!j.flag){j.flag=1;for(var l in j.srcs){if(3!=f[l]){j.flag=0;m.push(j);break}}if(j.flag){j.callback()}}}b[n]=m}}function c(k){var j=document.getElementsByTagName("HEAD").item(0);var i=document.createElement("script");i.language="javascript";i.type="text/javascript";i.text=k;j.appendChild(i)}function g(i){if(1!=f[i]){return}f[i]=2;$.ajax({url:i,type:"GET",dataType:"text",success:function(k,j,l){c(k);f[i]=3;a(i)}})}function d(j,i){if(!b[j]){b[j]=[]}var k=b[j];k.push(i)}this.mark=function(j){for(var k=0;k<j.length;k++){var l=j[k];f[l]=3}};this.include=function(k,p,o){if(o){if(e[o]){return}e[o]=1}var j={flag:0,srcs:{},callback:p};var m=typeof p=="function";for(var l=0;l<k.length;l++){var n=k[l];if(3!=f[n]){if(m){m=false;j.srcs[n]=1;d(n,j)}if(!f[n]){f[n]=1;g(n)}}}if(m){p()}}});Namespaces.create("com.netease.mail.common.PopFuncs",function(){this.agt=navigator.userAgent.toLowerCase();this.ie=((this.agt.indexOf("msie")!=-1)&&(this.agt.indexOf("opera")==-1)&&(this.agt.indexOf("omniweb")==-1));this.isValid=function(a){return null!=a&&typeof a!=undefined};this.judgeVal=function(a,b){return this.isValid(a)?a:b};this.getTrueBody=function(b){var a=b||window;var c=a.document;return(c.compatMode&&c.compatMode!="BackCompat")?c.documentElement:c.body};this.getScrollTop=function(b){var a=b||window;return this.ie?this.getTrueBody(a).scrollTop:a.pageYOffset};this.getScrollLeft=function(b){var a=b||window;return this.ie?this.getTrueBody(a).scrollLeft:a.pageXOffset};this.getMezzoTop=function(d,a,c,b){return(this.judgeVal(c,this.getScrollTop(b))+(((a||this.getTrueBody(b).clientHeight)-d)>>1))};this.getMezzoLeft=function(a,d,c,b){return(this.judgeVal(c,this.getScrollLeft(b))+(((d||this.getTrueBody(b).clientWidth)-a)>>1))};this.getPageSize=function(){var a=this.getTrueBody(window);var d=0;var b=0;var c=0;var f=0;var e=[0,0];e[0]=a.clientHeight;e[1]=a.clientWidth;d=a.offsetWidth;b=a.offsetHeight;c=a.scrollWidth;f=a.scrollHeight;if(b>e[0]){e[0]=b}if(d>e[1]){e[1]=d}if(f>e[0]){e[0]=f}if(c>e[1]){e[1]=c}return e};this.getMaxClientWidth=function(){var a=this.getTrueBody(window);return Math.max(a.clientWidth,a.scrollWidth)}});Namespaces.register("com.netease.mail.common.Popup",function Popup(b,e,i,d,c){this.divPopup=b;this.divMask=e;this.deltaX=d||0;this.deltaY=c||0;this.currX=0;this.currY=0;var f=this;var a=com.netease.mail.common.PopFuncs;var h=function(j){return document.getElementById(j)};this.reposition=function(p,n,o,k){var m=h(this.divPopup);if(!m||"none"==m.style.display){return}m.style.top=(this.currY||(this.deltaY+a.getMezzoTop(m.offsetHeight,k,n,window)))+"px";m.style.left=(this.currX||(this.deltaX+a.getMezzoLeft(m.offsetWidth,o,p,window)))+"px";var j=a.getPageSize();var l=h(this.divMask);l.style.height=j[0]+"px";l.style.width=j[1]+"px"};this.show=function(j,o,n,l,m,k){h(this.divMask).style.display="";h(this.divPopup).style.display="";this.currX=j;this.currY=o;this.reposition(n,l,m,k)};this.hide=function(){h(this.divPopup).style.display="none";h(this.divMask).style.display="none"};$(window).resize(function(){f.reposition()});var g=i||window;$(g).scroll(function(){f.reposition()})});Namespaces.create("com.netease.mail.common.RequestUtils",function(){var a=false;if(typeof XMLHttpRequest!="undefined"){var b=new XMLHttpRequest();if("withCredentials" in b){a=true}}this.fUrlP=function(d,e,c){if(c){return d+"="+e}else{return"&"+d+"="+e}};this.formSubmit=function(e,f,i,g,d){var h=$("#"+e);h.attr("action",f);h.attr("method",i);h.children("input").remove();for(var c in g){h.append('<input type="hidden" name="'+c+'" value="'+g[c]+'" />')}for(var c in d){h.attr(c,d[c])}h.submit();for(var c in d){h.removeAttr(c)}};this.getCookie=function(d){if(0<document.cookie.length){var c=d+"=";start=document.cookie.indexOf(c);if(-1<start){start+=c.length;end=document.cookie.indexOf(";",start);if(0>end){end=document.cookie.length}return unescape(document.cookie.substring(start,end))}}return null};this.supportCORS=function(){return a}});Namespaces.create("com.netease.mail.common.StringUtils",function(){this.paramReg=new RegExp("\\$(.{1,20}?)\\$","gm");this.merge=function(e,f,d){return e.replace(this.paramReg,function(g){var h=f[g.substring(1,g.length-1)];if(null!=h){return h}else{if(typeof h=="undefined"){return g}else{return d||"空"}}})};this.filterMap={"\n":"<br/>","<":"&lt;",">":"&gt;"};var c="";for(var a in this.filterMap){if(0<c.length){c+="|"}c+=a}this.filterExp=new RegExp(c,"gm");this.doFilter=function(e,d){if(!e){return e}var f=d||this.filterMap;return e.replace(this.filterExp,function(g){return f[g]})};this.blankStr=new RegExp("^\\s*$");this.isEmpty=function(d){return null==d||typeof d=="undefined"||this.blankStr.test(d)};this.isBlank=function(d){return null==d||this.blankStr.test(d)};this.fLen=function(g){var d=0;var f=g.length;for(var e=0;e<f;e++){if(g.charCodeAt(e)>255){d+=2}else{d++}}return d};this.join=function(i,d,f){var j=d||"=";var g=f||",";var h="";for(var e in i){if(0<h.length){h+=g}h+=(e+j+encodeURIComponent(i[e]||""))}return h};var b=" 　`｀~～!！@·#＃$￥%％^…&＆()（）-－_—=＝+＋[]［］|·:：;；\"“\\、'‘,，<>〈〉?？/／*＊.。{}｛｝";this.charMode=function(f){var e=f.charCodeAt(0);if(e>=48&&e<=57){return 1}else{if(e>=65&&e<=90){return 2}else{if(e>=97&&e<=122){return 4}else{if(-1<b.indexOf(f)){return 8}}}}return 0};this.toSBC=function(f){var e="";for(var g=0;g<f.length;g++){var h=f.charCodeAt(g);if(h==32){e+=String.fromCharCode(12288)}else{if(h<127){e=String.fromCharCode(h+65248)}else{e+=String.fromCharCode(h)}}}return e};this.toDBC=function(f){var e="";for(var g=0;g<f.length;g++){var h=f.charCodeAt(g);if(h==12288){e+=String.fromCharCode(32)}else{if(h>65280&&h<65375){e+=String.fromCharCode(h-65248)}else{e+=String.fromCharCode(h)}}}return e}});Namespaces.create("com.netease.mail.unireg.register.common.CheckUtils",function(){var b=com.netease.mail.common.StringUtils;var a={repeat:function(c){return/^(.)\1+$/.test(c)},list:(function(){var c=["123456","123456789","12345678","123123","5201314","1234567","7758521","654321","1314520","123321","1234567890","147258369","123654","5211314","woaini","1230123","987654321","147258","123123123","7758258","520520","789456","456789","159357","112233","1314521","456123","110110","521521","zxcvbnm","789456123","0123456789","0123456","123465","159753","qwertyuiop","987654","115415","1234560","123000","123789","100200","963852741","121212","111222","123654789","12301230","456456","741852963","asdasd","asdfghjkl","369258","863786","258369","8718693","666888","5845201314","741852","168168","iloveyou","852963","4655321","102030","147852369","321321"];return function(e){for(var d=0;d<c.length;d++){if(e==c[d]){return true}}return false}})()};this.checkName=function(c){var d=b.fLen(c);var e=/^[\w]+$/.test(c);if(d==0){return 0}else{if(!e){return -3}else{if(d>18){if(d<21){return -9}return -6}else{if(d<6){if(d>2){return -10}return -2}else{if(/^[0-9]+$/.test(c)){if(/^1[3458]\d{9}$/.test(c)){return -8}return -7}else{if(/^\d.*$/.test(c)){return -1}else{if(!/^([a-z]|[A-Z])/.test(c)){return -4}else{if(!(/[0-9a-zA-Z]+$/.test(c))){return -5}}}}}}}}return 1};this.checkPasswordStrength=function(e){var d=0,f,c=0;for(i=0;i<e.length;i++){f=b.charMode(e.charAt(i));if(0==f){return -1}if(0==(d&f)){d|=f;++c}}return c};this.checkPassword=function(e){var c=e.length;for(i=0;i<c;i++){if(0==b.charMode(e.charAt(i))){return -3}}if(c<6){return -1}else{if(c>16){return -2}else{for(var d in a){if(a[d](e)){return -4}}}}return 1};this.backendCheckName=function(c,d){$.post("/unireg/call.do?cmd=urs.checkName",{name:c},d)};this.isMobile=function(c){return/^1[3458]\d{9}$/.test(c)};this.checkMobile=function(c){return c==""?0:this.isMobile(c)?1:-1};this.checkVcode=function(c){return(c=="")?0:1}});Namespaces.create("com.netease.mail.unireg.register.common.FormLogger",function(){function a(c,b){b.level=c;$.post("/unireg/call.do?cmd=register.formLog",b)}this.info=function(b){a("info",b)};this.warn=function(b){a("warn",b)};this.error=function(b){a("error",b)};this.fatal=function(b){a("fatal",b)}});Namespaces.create("com.netease.mail.unireg.register.common.LoginUtils",function(){var c=com.netease.mail.common.RequestUtils;var d=com.netease.mail.common.StringUtils;var a={"163.com":"http://entry.mail.163.com/coremail/fcg/ntesdoor2?lightweight=1&verifycookie=1&language=-1&style=-1&from=unireg&df=unireg&username=","126.com":"http://entry.mail.126.com/cgi/ntesdoor?lightweight=1&verifycookie=1&language=-1&style=-1&from=unireg&df=unireg&username=","yeah.net":"http://entry.mail.yeah.net/cgi/ntesdoor?lightweight=1&verifycookie=1&language=-1&style=-1&from=unireg&df=unireg&username="};var b={"163.com":"mail163","126.com":"mail126","yeah.net":"mailyeah"};this.login=function(m,j,g,k,h,l){var i=j+"@"+g;var e={username:i,domain:g,password:k,language:"-1",passtype:(typeof h=="undefined"?"1":h),savelogin:"0"};var f="https://reg.163.com/logins.jsp?type=1";if(d.isEmpty(l)){f+=c.fUrlP("url",encodeURIComponent(a[g]+i))}else{f+=c.fUrlP("url",l)}c.formSubmit(m,f,"POST",e)}});Namespaces.create("com.netease.mail.unireg.register.common.VerifyUtils",function(){this.__$0=function(a){var q=10,w=a,n,m=w.length,f=new Date(),b=f.getTime(),c=b%q,h=(b-c)/q;if(c<1){c=1}c=b%q;var d=b%(q*q);h=(b-d)/q;h=h/q;d=(d-c)/q;var z=b+"",p=z.charAt(q),g=c+""+d+""+p,l=Number(g),e=l*Number(w),x=e+"",k="";for(n=(e+"").length-1;n>=0;n--){var o=x.charAt(n);k=k+o}var i=p+k+d+c,y=i.length,j=0,r="",v="";for(j=0;j<y;q++){r=r+i.charAt(j);j=j+2}for(j=1;j<y;j=j+2){v=v+i.charAt(j)}var u=r+v;u=i;var t=0,s="";for(t=0;t<u.length;t++){s=s+u.charAt(t)}return u}});Namespaces.create("com.netease.mail.unireg.register.main.RemindUtils",function(){var b=com.netease.mail.common.StringUtils;var c={success:'<div id="m_$fieldId$" class="tips"><span class="txt-succ"><b class="ico ico-suc-sml"></b>&nbsp;&nbsp;$msg$</span></div>',error:'<div id="m_$fieldId$" class="tips"><span class="txt-err"><b class="ico ico-warn-sml"></b>&nbsp;&nbsp;$msg$</a></span></div>'};var a={error:function(d){$("#"+d+"Ipt").addClass("ipt-err")}};this.showRemind=function(f,e,g){var d=$("#"+e+"Tips");this.hideRemind(e);d.after(b.merge(c[f],{fieldId:e,msg:g}));var h=a[f];if(h){h(e)}d.hide()};this.hideRemind=function(d){$("#m_"+d).remove();$("#"+d+"Tips").show();$("#"+d+"Ipt").removeClass("ipt-err")}});Namespaces.create("com.netease.mail.unireg.register.main.Start",function(){var M="main";var f=this;var m=com.netease.mail.common.StringUtils;var u=com.netease.mail.common.RequestUtils;var p=com.netease.mail.unireg.register.common.CheckUtils;var I=com.netease.mail.unireg.register.common.VerifyUtils;var b=com.netease.mail.unireg.register.common.FormLogger;var d=com.netease.mail.unireg.register.main.RemindUtils;var k;var h;var j={};var w=null;var F=null;var N={};var i={name:false,pwd:false,cfmPwd:false,mobile:true,vcode:false,accept:true};var B;var H;var x;var a;var s;var g;var c={disable:'<li class="disable"><label><input name="candName" type="radio"/>$name$@$domain$</label><span class="extInfo">(已被注册)</span></li>',vip163:'<li><label><input type="radio" style="visibility:hidden"/><b class="ico-vip"></b><a href="http://reg.vip.163.com/register.m?b08bqa1&f=fmail_reg&pageReg=1&username=$name$">$name$@$domain$</a></label><span class="extInfo">(特权邮箱，付费)</span></li>',vip126:'<li><label><input type="radio" style="visibility:hidden"/><b class="ico-vip"></b><a href="http://reg.vip.126.com/register.m?b09bqa1&f=fmail_reg&pageReg=1&username=$name$">$name$@$domain$</a></label><span class="extInfo">(特权邮箱，付费)</span></li>',vip188:'<li><label><input type="radio" style="visibility:hidden"/><b class="ico-vip"></b><a href="http://reg.mail.188.com/servlet/regist?b12bqa1&f=fmail_reg&pageReg=1&username=$name$">$name$@$domain$</a></label><span class="extInfo">(特权邮箱，付费)</span></li>',free:'<li><label onclick="_Global.main.selectCandidate(\'$name$\',\'$domain$\');"><input name="candName" type="radio"/>$name$<span class="txt-succ">@$domain$</span></label><span class="extInfo">(可以注册)</span></li>'};function C(){for(var R in i){if(!i[R]){return false}}return true}function o(R){w=R;F=R;N[R]=new Date().getTime();j[R]=false;i[R]=false}function G(S,R){w=null;if(j[S]&&N[S]){var T=$.extend({opt:"write_field",flow:M,field:S},R);T.timecost=new Date().getTime()-N[S];b.info(T)}N[S]=false}this.selectCandidate=function(R,S){i.name=true;E();L(S)};function O(R,S){$("#conflictOthersDiv").show();$("#conflictOthers").append(m.merge(c[R],S))}function P(U,T){var S=T["163.com"];var R=T["126.com"];var V=T["yeah.net"];if(S){O("free",{name:U,domain:"163.com"})}if(R){O("free",{name:U,domain:"126.com"})}if(V){O("free",{name:U,domain:"yeah.net"})}if(!S){O("disable",{name:U,domain:"163.com"})}if(!R){O("disable",{name:U,domain:"126.com"})}if(!V){O("disable",{name:U,domain:"yeah.net"})}}function E(){$("#conflictDiv").hide();$("#nameTips").show()}function Q(T,R,S){d.hideRemind("nameTips");$("#nameTips").hide();$("#conflictOthersDiv").hide();$("#conflictOthers > li").remove();if(R){$("#conflictTitle").attr("class","txt-succ txt-14")}else{$("#conflictTitle").attr("class","txt-impt txt-14")}if(S){$("#conflictMobile").hide()}else{$("#conflictMobile").show()}$("#conflictTitle").html(T);$("#conflictDiv").show()}function D(U,T,R){var S=R||{};switch(U){case"numberstart":Q("邮件地址必需以英文字母开头");switch(x){case"163.com":case"yeah.net":if(S.vip163){O("vip163",{name:T,domain:"vip.163.com"})}else{if(S.vip126){O("vip126",{name:T,domain:"vip.126.com"})}}break;case"126.com":if(S.vip126){O("vip163",{name:T,domain:"vip.126.com"})}else{if(S.vip163){O("vip126",{name:T,domain:"vip.163.com"})}}}break;case"allnumber":Q("邮件地址必需以英文字母开头");if(S.vip163){O("vip163",{name:T,domain:"vip.163.com"})}break;case"longname":case"shortname":Q("长度应为6~18个字符");switch(x){case"163.com":case"yeah.net":if(S.vip163){O("vip163",{name:T,domain:"vip.163.com"})}else{if(S.vip126){O("vip126",{name:T,domain:"vip.126.com"})}else{if(S.vip188){O("vip188",{name:T,domain:"188.com"})}}}break;case"126.com":if(S.vip126){O("vip126",{name:T,domain:"vip.126.com"})}else{if(S.vip163){O("vip163",{name:T,domain:"vip.163.com"})}else{if(S.vip188){O("vip188",{name:T,domain:"188.com"})}}}break}break;case"alloccupy":Q("该邮件地址已被注册");P(T,S);break;case"freealloccupy":Q("该邮件地址已被注册");switch(x){case"163.com":case"yeah.net":if(S.vip163){O("vip163",{name:T,domain:"vip.163.com"})}else{if(S.vip126){O("vip126",{name:T,domain:"vip.126.com"})}else{if(S.vip188){O("vip188",{name:T,domain:"188.com"})}}}break;case"126.com":if(S.vip126){O("vip126",{name:T,domain:"vip.126.com"})}else{if(S.vip163){O("vip163",{name:T,domain:"vip.163.com"})}else{if(S.vip188){O("vip188",{name:T,domain:"188.com"})}}}break}P(T,S);break;case"freesomeoccupy":Q("该邮件地址已被注册");P(T,S);break}}function n(S,R){p.backendCheckName(R,function(T){switch(T.code){case 200:D(S,R,T.result);break;default:d.showRemind("error","name","系统忙");break}})}function L(S){x=S;var R=B[x];$("#vcodeImg").attr("src",R.src+H+new Date().getTime());$("#vcodeIpt").css("width",R.iptwidth+"px");$("#vcodeImg").attr("width",R.imgwidth);$("#vcodeImg").attr("height",R.imgheight);$("#vRemind").html(R.tips);R.callback();r(S)}function r(R){switch(R){case"163.com":$("#mainDomainSelect option:nth-child(1)").attr("selected","selected");break;case"126.com":$("#mainDomainSelect option:nth-child(2)").attr("selected","selected");break;default:$("#mainDomainSelect option:nth-child(3)").attr("selected","selected");break}}function A(U,S){var R=m.fLen(U);var T=p.checkPasswordStrength(U);if(-1==T){$("#mainPwdStatus").hide();if(!S){d.showRemind("error","mainPwd","密码必需由英文字母、数字或特殊符号组成")}return}if(R<6){if(R==0){d.hideRemind("mainPwd");d.hideRemind("mainCfmPwd")}$("#mainPwdStatus").hide();return}if(R>16){$("#mainPwdStatus").hide();if(!S){d.showRemind("error","mainPwd","密码长度应为6~16个字符")}return}$("#mainPwdStatus ").show();d.hideRemind("mainPwd");switch(T){case 2:$("#mainPwdStatus").attr("class","pswState pswState-normal");break;case 3:case 4:$("#mainPwdStatus").attr("class","pswState pswState-strong");break;default:$("#mainPwdStatus").attr("class","pswState pswState-poor");break}}function l(){$("#vcodeImg").attr("src",B[x].src+H+new Date().getTime());$("#vcodeIpt").val("");i.vcode=false}this.initEnv=function(R){H="&env="+I.__$0(R)+"&t="};this.recover=function(){l();y();$("#nameIpt").blur()};function K(R){return""==R||g==R}function J(R){p.backendCheckName(R,function(T){switch(T.code){case 200:var S=T.result;if(!S){D("alloccupy",R,S)}else{if(S[x]){E();d.showRemind("success","name","恭喜，该邮件地址可注册");i.name=true}else{if(S["163.com"]||S["126.com"]||S["yeah.net"]){D("freesomeoccupy",R,S)}else{if(S.vip163||S.vip126||S.vip188){D("freealloccupy",R,S)}}}}break;default:d.showRemind("error","name","系统忙");break}})}var e={name:function(R){var T="regForm-item mainBody-hasFocus-focusArea";var S=T+" regForm-item-focus";$("#nameIpt").bind("focus",function(){o("name");E();$("#nameDl").attr("class",S);$("#mMaskD > .m-mask").hide();v(true);d.hideRemind("name");return false}).bind("mouseover",function(){$("#nameDl").attr("class",S);return false}).bind("mouseout",function(){if(w!="name"){$("#nameDl").attr("class",T)}return false}).bind("keyup",function(U){if(U.keyCode==13){$("#nameIpt").blur();return false}j.name=true;var V=$.trim($("#nameIpt").val());if(V==""){d.hideRemind("name");E()}return false}).bind("blur",function(){$("#nameDl").attr("class",T);d.hideRemind("name");var X=$.trim($("#nameIpt").val());if(K(X)){G("name",{result:"empty"});return false}X=m.toDBC(X);$("#nameIpt").val(X);var W=$.trim($("#mainPwdIpt").val());if(W==X){G("name",{result:"eqpwd"});d.showRemind("error","name","用户名和密码不能完全相同");return false}var V=p.checkName(X);var U="done";switch(V){case 1:J(X);break;case -1:U="numberstart";n(U,X);break;case -2:U="tooshort";Q("长度应为6~18个字符");break;case -3:U="wrongchar";Q("邮件地址需由字母、数字或下划线组成");break;case -4:U="wrongstart";Q("邮件地址必需以英文字母开头");break;case -5:U="wrongend";Q("请以英文字母或数字结尾");break;case -6:U="toolong";Q("长度应为6~18个字符");break;case -7:U="allnumber";n(U,X);break;case -8:U="mobilename";Q('您填写的是手机号码，将为您注册手机号码邮箱，免费享受更多贴心服务。<br/><br/><a href="javascript:void(0);" onclick="_Global.mobile.turnOn(\''+X+"','mobilename');$('#mMaskD > .m-mask').hide();return false;\" class=\"btnSml\" hidefocus=\"true\">继&nbsp;&nbsp;&nbsp;续</a>",true,true);$("#mMaskD > .m-mask").show();v(false);break;case -9:U="longname";n(U,X);break;case -10:U="shortname";n(U,X);break}var Y=X+"@"+x;G("name",{result:U,uid:Y});return false})},vcode:function(R){B=R.vmap;f.initEnv(R.envalue);L(R.currDomain);$("#vcodeImg,#vcodeA").click(function(){l();return false});var S="regForm-item-focus";var U="regForm-item-focusImpt";var T=U+" "+S;$("#vcodeIpt").bind("blur",function(){$("#vcodeDl").removeClass(T);var W=$.trim($("#vcodeIpt").val());var V=p.checkVcode(W);if(V!=0){d.hideRemind("vcode");i.vcode=true;G("vcode",{result:"done"});W=m.toDBC(W);$("#vcodeIpt").val(W)}else{G("vcode",{result:"empty"})}return false}).bind("keyup",function(V){if(V.keyCode==13){$("#vcodeIpt").blur();return false}j.vcode=true;return false}).bind("mouseover",function(){if(w!="vcode"){$("#vcodeDl").removeClass(T).addClass(S)}return false}).bind("mouseout",function(){if(w!="vcode"){$("#vcodeDl").removeClass(T)}return false}).bind("focus",function(){o("vcode");d.hideRemind("vcode");$("#vcodeDl").removeClass(T).addClass(U)})},domain:function(R){$("#mainDomainSelect").bind("change",function(){L($(this).find("option:selected").val());$("#nameIpt").blur();return false})},password:function(){$("#mainPwdIpt").bind("focus",function(){o("pwd");$("#mainPwdDl").attr("class","regForm-item regForm-item-focus");d.hideRemind("mainPwd");A($.trim($("#mainPwdIpt").val()),true);return false}).bind("mouseover",function(){$("#mainPwdDl").attr("class","regForm-item regForm-item-focus");return false}).bind("mouseout",function(){if(w!="pwd"){$("#mainPwdDl").attr("class","regForm-item")}return false}).bind("keyup",function(R){if(R.keyCode==13){$("#mainPwdIpt").blur();return false}j.pwd=true;A(m.toDBC($.trim($("#mainPwdIpt").val())));return false}).bind("blur",function(){$("#mainPwdDl").attr("class","regForm-item");$("#mainPwdStatus").hide();var T=$.trim($("#mainPwdIpt").val());if(T==""){G("pwd",{result:"empty"});d.hideRemind("mainPwd");return false}T=m.toDBC(T);$("#mainPwdIpt").val(T);var S=$.trim($("#nameIpt").val());if(T.toUpperCase()==S.toUpperCase()){G("pwd",{result:"eqname"});d.showRemind("error","mainPwd","密码和用户名不能完全相同");return false}var U={};var V=p.checkPassword(T);switch(V){case 1:i.pwd=true;var W=p.checkPasswordStrength(T);switch(W){case 1:d.showRemind("success","mainPwd","密码强度：弱");break;case 2:d.showRemind("success","mainPwd","密码强度：中");break;case 3:case 4:d.showRemind("success","mainPwd","密码强度：强");break;default:break}U.result="done";U.strength=W;break;case -1:U.result="tooshort";d.showRemind("error","mainPwd","密码长度应为6~16个字符");break;case -2:d.showRemind("error","mainPwd","密码长度应为6~16个字符");U.result="toolong";break;case -3:d.showRemind("error","mainPwd","密码必需由英文字母、数字或特殊符号组成");U.result="wrongchar";break;case -4:d.showRemind("error","mainPwd","密码过于简单，请尝试“字母+数字”的组合");U.result="toosimple";break;default:break}G("pwd",U);var R=$.trim($("#mainCfmPwdIpt").val());if(R!=""){$("#mainCfmPwdIpt").blur()}else{d.hideRemind("mainCfmPwd")}return false})},confirmPassword:function(){$("#mainCfmPwdIpt").bind("focus",function(){o("cfmPwd");$("#mainCfmPwdDl").attr("class","regForm-item regForm-item-focus");d.hideRemind("mainCfmPwd");return false}).bind("mouseover",function(){$("#mainCfmPwdDl").attr("class","regForm-item regForm-item-focus");return false}).bind("mouseout",function(){if(w!="cfmPwd"){$("#mainCfmPwdDl").attr("class","regForm-item")}return false}).bind("blur",function(T){$("#mainCfmPwdDl").attr("class","regForm-item");d.hideRemind("mainCfmPwd");var S=$.trim($("#mainPwdIpt").val());if(!i.pwd&&S!=""){return false}var R=$.trim($("#mainCfmPwdIpt").val());if(R==""){G("cfmPwd",{result:"empty"});if(S!=""){d.showRemind("error","mainCfmPwd","请再次填写密码");return false}d.hideRemind("mainCfmPwd");return false}R=m.toDBC(R);$("#mainCfmPwdIpt").val(R);if(R==S){d.showRemind("success","mainCfmPwd","");i.cfmPwd=true;G("cfmPwd",{result:"done"})}else{d.showRemind("error","mainCfmPwd","两次填写的密码不一致");G("cfmPwd",{result:"notmatch"})}return false}).bind("keyup",function(R){if(R.keyCode==13){$("#mainCfmPwdIpt").blur();return false}j.cfmPwd=true;return false})},accept:function(){$("#mainAcceptIpt").click(function(){if(!$("#mainAcceptIpt").attr("checked")){i.accept=false;d.showRemind("error","mainAccept","请接受服务条款")}else{i.accept=true;d.hideRemind("mainAccept")}})}};this.turnOn=function(R,S){if(_Global.locked){return}if(R&&S){x=S;switch(S){case"163.com":$("#mainDomainSelect option:nth-child(1)").attr("selected","selected");break;case"126.com":$("#mainDomainSelect option:nth-child(2)").attr("selected","selected");break;default:$("#mainDomainSelect option:nth-child(3)").attr("selected","selected");break}$("#nameIpt").val(R)}$("#nameIpt").blur();$("#regMobile").hide();$("#regMain").show();$("#guideMobile").hide();$("#guideMain").show();$("#tabsUl").attr("class","tabs1-on");_Global.flow=this};this.init=function(S){if(typeof S.flow!="undefined"){M=S.flow}for(var R in e){e[R](S)}k=S.from;h=S.forcedFlow;a=S.targetURL;s=S.sid;g=S.gw};function q(R,S){for(var T=0;T<R.length;T++){var U=$("#"+R[T]);S?U.removeAttr("disabled"):U.attr("disabled","true")}}function v(R){q(["mainPwdIpt","mainCfmPwdIpt","mainMobileIpt","vcodeIpt","mainAcceptIpt"],R);if(R){$("#mainRegA").show();$("#mainRegA_d").hide()}else{$("#mainRegA").hide();$("#mainRegA_d").html("立即注册");$("#mainRegA_d").show()}}function y(R){var S=true;if(R){S=false;$("#mainRegA").hide();$("#mainRegA_d").html(R);$("#mainRegA_d").show()}else{$("#mainRegA").show();$("#mainRegA_d").hide()}q(["nameIpt","mainPwdIpt","mainCfmPwdIpt","mainMobileIpt","vcodeIpt","mainAcceptIpt"],S);_Global.locked=!S}this.handleMsg=function(R){switch(R.msg){case"INVALID NAME":d.showRemind("error","name","无效的用户名");i.name=false;break;case"ILLEGAL_UID":$("#nameIpt").blur();i.name=false;break;case"NAME_EQUALS_PASSWORD":d.showRemind("error","mainPwd","密码和用户名不能完全相同");i.pwd=false;break;case"NO_PASSWORD":$("#mainPwdIpt").blur();i.pwd=false;break;case"NAME EQUALS PASSWORD":case"PASSWORD TOO SIMPLE":d.showRemind("error","mainPwd","密码过于简单，请尝试“字母+数字”的组合");i.pwd=false;break;case"NO_CONFIRMED_PASSWORD":case"PASSWORD_NOT_MATCH":$("#mainCfwPwdIpt").blur();i.cfmPwd=false;break;case"INVALID MOBILE":d.showRemind("error","mainMobile","请填写有效的11位手机号码");i.mobile=false;break;case"BIND TOO MANY":d.showRemind("error","mainMobile","该手机号码已绑定5个帐号，请编辑短信“JC”发送到 10690163331，取消手机和所有帐号的绑定关系");i.mobile=false;break;case"VCODE_NOT_MATCH":d.showRemind("error","vcode","验证码不正确，请重新填写");if(R.result){f.initEnv(R.result)}$("#vcodeImg").click();i.vcode=false;break;case"INVALID_SUSPEND":case"REGISTER_NOT_FOUND":$("#overdueTips").show();break;default:$("#overdueTips").show();break}};this.fieldVal=function(R){switch(R){case"name":return $.trim($("#nameIpt").val());case"pwd":return $.trim($("#mainPwdIpt").val());case"cfmpwd":return $.trim($("#mainCfmPwdIpt").val());case"mobile":return $.trim($("#mainMobileIpt").val());case"vcode":return $.trim($("#vcodeIpt").val());default:return""}};var z=false;var t={};this.getStartParam=function(R){return t[R]};this.start=function(){var V=$.trim($("#nameIpt").val());var W=V+"@"+x;var U=$.trim($("#mainPwdIpt").val());var T=$.trim($("#mainCfmPwdIpt").val());var S=$.trim($("#mainMobileIpt").val());var X=$.trim($("#vcodeIpt").val());if(!C()){if(!i.name){if(K(V)){d.showRemind("error","name","请填写邮件地址")}}if(!i.pwd){if(U==""){d.showRemind("error","mainPwd","请填写密码")}}if(!i.cfmPwd){if(T==""){d.showRemind("error","mainCfmPwd","请再次填写密码")}}if(!i.vcode){if(X==""){d.showRemind("error","vcode","请填写图片中的验证码")}}return false}y("处理中...");var R="https://ssl.mail.163.com/regall/unireg/call.do;jsessionid="+s+"?cmd=register.start";t={name:V,flow:M,uid:W,password:U,confirmPassword:T,mobile:S,vcode:X,from:k};if(h){t.forcedFlow=h}if(u.supportCORS()){$.ajax({url:R,xhrFields:{withCredentials:true},type:"POST",data:t,success:function(Z,aa,Y){f.handleStart(Z,Y.status)}})}else{u.formSubmit("submitForm",R+"&reforward=common/reform&targetCmd=register.ctrlTop","POST",t,{target:"submitFrame"})}};this.handleStart=function(S,R){switch(R){case 200:if(typeof S!="object"){S=$.parseJSON(S)}switch(S.code){case 200:z=true;com.netease.mail.unireg.register.common.LoginUtils.login("submitForm",t.name,x,t.password,"1",a);break;default:y();f.handleMsg(S);break}break;case 201:showSecondarySection(S);break;default:y();$("#overdueTips").show();break}};this.quit=function(){if(!z){b.info({opt:"quit_reg",flow:M,lastField:F})}}});Namespaces.create("com.netease.mail.unireg.register.mobile.Start",function(){var L="mobile";var g=this;var n=com.netease.mail.common.StringUtils;var x=com.netease.mail.common.RequestUtils;var p=com.netease.mail.unireg.register.common.CheckUtils;var b=com.netease.mail.unireg.register.common.FormLogger;var d=com.netease.mail.unireg.register.main.RemindUtils;var m;var i;var l={};var y=null;var H=null;var M={};var J=false;var j={mobile:false,acode:false,pwd:false,cfmPwd:false,accept:true};var z;var a;var u;function F(){for(var O in j){if(!j[O]){return false}}return true}function o(O){y=O;H=O;M[O]=new Date().getTime();l[O]=false;j[O]=false}function I(P,O){y=null;if(l[P]&&M[P]){var Q=$.extend({opt:"write_field",flow:L,field:P},O);Q.timecost=new Date().getTime()-M[P];b.info(Q)}M[P]=false}function D(R,P){var O=n.fLen(R);var Q=p.checkPasswordStrength(R);if(-1==Q){$("#mobilePwdStatus").hide();if(!P){d.showRemind("error","mainPwd","密码必需由英文字母、数字或特殊符号组成")}return}if(O<6){if(O==0){d.hideRemind("mobilePwd");d.hideRemind("mobileCfmPwd")}$("#mobilePwdStatus").hide();return}if(O>16){$("#mobilePwdStatus").hide();if(!P){d.showRemind("error","mobilePwd","密码长度应为6~16个字符")}return}$("#mobilePwdStatus ").show();d.hideRemind("mobilePwd");switch(Q){case 2:$("#mobilePwdStatus").attr("class","pswState pswState-normal");break;case 3:case 4:$("#mobilePwdStatus").attr("class","pswState pswState-strong");break;default:$("#mobilePwdStatus").attr("class","pswState pswState-poor");break}}this.showRebind=function(O){if(O){$("#rebindSpan").html(O)}rebindPopup.show()};var c=false;var E=false;var r="163.com";function q(O){if(c){return}c=true;$.ajax({url:"/unireg/call.do?cmd=added.mobilemail.checkBinding",type:"POST",data:{mobile:O},success:function(S,T,Q){c=false;var R=t;t=false;switch(Q.status){case 200:switch(S.code){case 200:d.showRemind("success","mobile","该号码可注册");j.mobile=true;if(R){e(O)}break;case 201:E=true;r=z[S.result];var P="该号码已被激活";if(S.msg){P+="并与&nbsp;"+S.msg+"&nbsp;绑定"}P+="&nbsp;&nbsp;<a href='javascript:void(0);' onclick='_Global.mobile.showRebind(\""+O+"@"+r+"\");'>重新激活</a>";d.showRemind("error","mobile",P);break;case 202:d.showRemind("error","mobile","该邮件地址已存在，不能再注册");break;case 301:d.showRemind("error","mobile","请填写有效的11位手机号码");break;default:break}break;case 201:showSecondarySection(S);break;default:break}}})}var G;var N=false;var h=true;function K(O){if(N){window.clearInterval(G)}h=false;$("#mobileIpt").attr("disabled",true);$("#sendAcodeStg").html(O);$("#sendAcodeBtn").attr("class","btn-disable");$("#sendAcodeBtn").unbind("click");$("#sendAcodeBtn").click(function(){return false})}function B(P){if(!h&&!N){h=true;var O=P||"免费获取验证码";$("#mobileIpt").removeAttr("disabled");$("#acodeSentSpan").hide();$("#sendAcodeBtn").attr("class","btn");$("#sendAcodeStg").html(O);$("#sendAcodeBtn").unbind("click");$("#sendAcodeBtn").click(function(){e();return false})}}function v(P,O){if(N){return}N=true;K("60秒后可重新获取验证码");$("#acodeSentSpan").show();G=window.setInterval(function(){if(--O==0){N=false;B('免费获取验证码<font color="#999">（今天剩余'+P+"次 ）</font>");window.clearInterval(G)}else{$("#sendAcodeStg").html(O+"秒后可重新获取验证码")}},1000)}var t=false;function e(O){t=c;if(t){return}var Q=O||$.trim($("#mobileIpt").val());if(!j.mobile){if(Q==""){d.showRemind("error","mobile","请填写手机号码")}return}var P=Q+"@"+r;if(E){g.showRebind(P);return}K("发送中...");$.ajax({url:"/unireg/call.do?cmd=added.mobileverify.sendAcode",type:"POST",data:{mobile:Q,uid:P,mark:"mobile_start"},success:function(S,T,R){switch(R.status){case 200:switch(S.code){case 200:J=true;v(S.msg,60);break;case 201:K("每天只能获取3次验证短信");$("#acodeSentSpan").show();$("#mobileIpt").removeAttr("disabled");break;case 202:B();d.showRemind("error","mobile","该邮件地址已存在，不能再注册");break;case 301:B();d.showRemind("error","mobile","请填写有效的11位手机号码");break;case 401:$("#sendAcodeStg").html("每天只能获取3次验证短信");d.showRemind("error","mobile","发送次数达到当天限制");$("#mobileIpt").removeAttr("disabled");break;default:B();d.showRemind("error","mobile","获取验证码失败");break}break;case 201:showSecondarySection(S);break;default:break}}})}this.initEnv=function(O){};this.recover=function(){$("#acodeIpt").val("");j.acode=false;A();B();$("#mobileIpt").blur()};var f={acode:function(){$("#sendAcodeBtn").click(function(){e();return false});$("#acodeIpt").bind("focus",function(){o("acode");$("#acodeDl").attr("class","regForm-item regForm-item-focus");d.hideRemind("acode");return false}).bind("blur",function(){$("#acodeDl").attr("class","regForm-item");var O=$.trim($("#acodeIpt").val());if(O!=""){I("acode",{result:"done"});j.acode=true;O=n.toDBC(O);$("#acodeIpt").val(O);return false}else{if(J){d.showRemind("error","acode","请填写验证码")}}I("acode",{result:"empty"});return false}).bind("keyup",function(O){if(O.keyCode==13){$("#acodeIpt").blur();return false}l.acode=true;return false}).bind("mouseout",function(){if(y!="acode"){$("#acodeDl").attr("class","regForm-item")}return false}).bind("mouseover",function(){$("#acodeDl").attr("class","regForm-item regForm-item-focus");return false})},password:function(){$("#mobilePwdIpt").bind("focus",function(){o("pwd");$("#mobilePwdDl").attr("class","regForm-item regForm-item-focus");d.hideRemind("mobilePwd");D($.trim($("#mobilePwdIpt").val()),true);return false}).bind("mouseover",function(){$("#mobilePwdDl").attr("class","regForm-item regForm-item-focus");return false}).bind("mouseout",function(){if(y!="pwd"){$("#mobilePwdDl").attr("class","regForm-item")}return false}).bind("keyup",function(O){if(O.keyCode==13){$("#mobilePwdIpt").blur();return false}l.pwd=true;D(n.toDBC($.trim($("#mobilePwdIpt").val())));return false}).bind("blur",function(){$("#mobilePwdDl").attr("class","regForm-item");$("#mobilePwdStatus").hide();var Q=$.trim($("#mobilePwdIpt").val());if(Q==""){d.hideRemind("mobilePwd");I("pwd",{result:"empty"});return false}Q=n.toDBC(Q);$("#mobilePwdIpt").val(Q);var P=$.trim($("#mobileIpt").val());if(Q.toUpperCase()==P.toUpperCase()){d.showRemind("error","mobilePwd","密码和用户名不能完全相同");I("pwd",{result:"eqmobile"});return false}var R={};var S=p.checkPassword(Q);switch(S){case 1:j.pwd=true;var T=p.checkPasswordStrength(Q);switch(T){case 1:d.showRemind("success","mobilePwd","密码强度：弱");break;case 2:d.showRemind("success","mobilePwd","密码强度：中");break;case 3:case 4:d.showRemind("success","mobilePwd","密码强度：强");break;default:break}R.result="done";R.strength=T;break;case -1:R.result="tooshort";d.showRemind("error","mobilePwd","密码长度应为6~16个字符");break;case -2:d.showRemind("error","mobilePwd","密码长度应为6~16个字符");R.result="toolong";break;case -3:d.showRemind("error","mobilePwd","密码必需由英文字母、数字或特殊符号组成");R.result="wrongchar";break;case -4:d.showRemind("error","mobilePwd","密码过于简单，请尝试“字母+数字”的组合");R.result="toosimple";break;default:break}I("pwd",R);var O=$.trim($("#mobileCfmPwdIpt").val());if(O!=""){$("#mobileCfmPwdIpt").blur()}else{d.hideRemind("mobileCfmPwd")}return false})},confirmPassword:function(){$("#mobileCfmPwdIpt").bind("focus",function(){o("cfmPwd");$("#mobileCfmPwdDl").attr("class","regForm-item regForm-item-focus");d.hideRemind("mobileCfmPwd");return false}).bind("mouseover",function(){$("#mobileCfmPwdDl").attr("class","regForm-item regForm-item-focus");return false}).bind("mouseout",function(){if(y!="cfmPwd"){$("#mobileCfmPwdDl").attr("class","regForm-item")}return false}).bind("blur",function(Q){$("#mobileCfmPwdDl").attr("class","regForm-item");d.hideRemind("mobileCfmPwd");var P=$.trim($("#mobilePwdIpt").val());if(!j.pwd&&P!=""){return false}var O=$.trim($("#mobileCfmPwdIpt").val());if(O==""){I("cfmPwd",{result:"empty"});if(P!=""){d.showRemind("error","mobileCfmPwd","请再次填写密码");return false}d.hideRemind("mobileCfmPwd");return false}O=n.toDBC(O);$("#mobileCfmPwdIpt").val(O);if(O==P){d.showRemind("success","mobileCfmPwd","");j.cfmPwd=true;I("cfmPwd",{result:"done"})}else{d.showRemind("error","mobileCfmPwd","两次填写的密码不一致");I("cfmPwd",{result:"notmatch"})}return false}).bind("keyup",function(O){if(O.keyCode==13){$("#mobileCfmPwdIpt").blur();return false}l.cfmPwd=true;return false})},mobile:function(O){$("#mobileIpt").bind("focus",function(){o("mobile");E=false;$("#mobileDl").attr("class","regForm-item regForm-item-focus");d.hideRemind("mobile");return false}).bind("blur",function(){$("#mobileDl").attr("class","regForm-item");var Q=$.trim($("#mobileIpt").val());Q=n.toDBC(Q);$("#mobileIpt").val(Q);var P=p.checkMobile(Q);switch(P){case 0:I("mobile",{result:"empty"});return false;case -1:d.showRemind("error","mobile","请填写有效的11位手机号码");I("mobile",{result:"wrong"});break;case 1:q(Q);I("mobile",{result:"done"});break}return false}).bind("keyup",function(P){B();if(P.keyCode==13){$("#mobileIpt").blur();return false}l.mobile=true;return false}).bind("mouseover",function(){$("#mobileDl").attr("class","regForm-item regForm-item-focus");return false}).bind("mouseout",function(){if(y!="mobile"){$("#mobileDl").attr("class","regForm-item")}return false});$("#rebindA").click(function(){E=false;j.mobile=true;rebindPopup.hide();d.hideRemind("mobile");$("#sendAcodeBtn").click();return false})},accept:function(){$("#mobileAcceptIpt").click(function(){if(!$("#mobileAcceptIpt").attr("checked")){j.accept=false;d.showRemind("error","mobileAccept","请接受服务条款")}else{j.accept=true;d.hideRemind("mobileAccept")}})}};var k=false;this.turnOn=function(O,P){if(_Global.locked){return}if(O){$("#mobileIpt").val(O);$("#mobileIpt").blur()}$("#regMain").hide();$("#regMobile").show();$("#guideMain").hide();$("#guideMobile").show();$("#tabsUl").attr("class","tabs2-on");_Global.flow=this;if(!k){k=true;b.info({opt:"turn_on",flow:L,pos:P})}};this.init=function(P){if(typeof P.flow!="undefined"){L=P.flow}for(var O in f){f[O](P)}m=P.from;i=P.forcedFlow;a=P.targetURL;z=P.boundDomains;u=P.sid};this.fieldVal=function(O){switch(O){case"name":return $.trim($("#mobileIpt").val());case"pwd":return $.trim($("#mobilePwdIpt").val());case"cfmpwd":return $.trim($("#mobileCfmPwdIpt").val());case"acode":return $.trim($("#acodeIpt").val());default:return""}};function s(O,P){for(var Q=0;Q<O.length;Q++){var R=$("#"+O[Q]);P?R.removeAttr("disabled"):R.attr("disabled","true")}}function A(O){var P=true;if(O){P=false;$("#mobileRegA").hide();$("#mobileRegA_d").html(O);$("#mobileRegA_d").show()}else{$("#mobileRegA").show();$("#mobileRegA_d").hide()}s(["mobileIpt","mobilePwdIpt","mobileCfmPwdIpt","acodeIpt"],P);_Global.locked=!P}this.handleMsg=function(O){switch(O.msg){case"WRONG MOBILE":case"ILLEGAL_UID":case"INVALID NAME":d.showRemind("error","mobile","无效手机号");j.mobile=false;break;case"EXCESSIVE ATTEMPTS":d.showRemind("error","mobile","验证尝试次数过多");j.mobile=false;break;case"MUID ALIASED":d.showRemind("error","mobile","该邮件地址已存在，不能再注册");j.mobile=false;break;case"MUID_EXIST":d.showRemind("error","mobile","该邮件地址已存在，不能再注册");j.mobile=false;break;case"NAME_EQUALS_PASSWORD":d.showRemind("error","mobilePwd","密码和用户名不能完全相同");j.pwd=false;break;case"NO_PASSWORD":$("#mobilePwdIpt").blur();j.pwd=false;break;case"NAME EQUALS PASSWORD":case"PASSWORD TOO SIMPLE":d.showRemind("error","mobilePwd","密码过于简单");j.pwd=false;break;case"NO_CONFIRMED_PASSWORD":case"PASSWORD_NOT_MATCH":$("#mobileCfmPwdIpt").blur();j.cfmPwd=false;break;case"BIND TOO MANY":d.showRemind("error","mobile","手机绑定次数过多");j.mobile=false;break;case"ILLEGAL_VERIFY":case"WRONG ACODE":case"NOT PASS":d.showRemind("error","acode","验证码不正确，请重新填写");j.acode=false;break;case"VERIFY_ACODE_NORETURN":d.showRemind("error","acode","验证码校验失败，请重新填写");j.acode=false;break;case"INVALID_SUSPEND":case"REGISTER_NOT_FOUND":$("#overdueTips").show();break;default:$("#overdueTips").show();break}};var C=false;var w={};this.getStartParam=function(O){return w[O]};this.start=function(){var S=$.trim($("#mobileIpt").val());var T=S+"@163.com";var U=$.trim($("#acodeIpt").val());var R=$.trim($("#mobilePwdIpt").val());var Q=$.trim($("#mobileCfmPwdIpt").val());var P=true;if(!F()){if(!j.mobile){if(S==""){d.showRemind("error","mobile","请填写手机号码")}}if(!j.acode){if(U==""){d.showRemind("error","acode","请填写短信验证码")}}if(!j.pwd){if(R==""){d.showRemind("error","mobilePwd","请填写密码")}}if(!j.cfmPwd){if(Q==""){d.showRemind("error","mobileCfmPwd","请再次填写密码")}}return false}A("处理中...");var O="https://ssl.mail.163.com/regall/unireg/call.do;jsessionid="+u+"?cmd=register.start";w={flow:L,mobile:S,uid:T,acode:U,mark:"mobile_start",password:R,confirmPassword:Q,uapw:P,from:m};if(i){w.forcedFlow=i}if(x.supportCORS()){$.ajax({url:O,xhrFields:{withCredentials:true},type:"POST",data:w,success:function(W,X,V){g.handleStart(W,V.status)}})}else{x.formSubmit("submitForm",O+"&reforward=common/reform&targetCmd=register.ctrlTop","POST",w,{target:"submitFrame"})}};this.handleStart=function(P,O){switch(O){case 200:if(typeof P!="object"){P=$.parseJSON(P)}switch(P.code){case 200:C=true;com.netease.mail.unireg.register.common.LoginUtils.login("submitForm",w.mobile,"163.com",w.password,"1",a);break;default:A();g.handleMsg(P);break}break;case 201:showSecondarySection(P);break;default:A();$("#overdueTips").show();break}};this.quit=function(){if(!C){b.info({opt:"quit_reg",flow:L,lastField:H})}}});